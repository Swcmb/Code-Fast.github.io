<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C 指针</title>
</head>
<body>
<div class="article-intro" id="content">
			
			
<h1>C <span class="color_h1">指针</span></h1>&#13;
&#13;
<div class="tutintro">&#13;
<p>学习 C 语言的指针既简单又有趣。通过指针，可以简化一些 C 编程任务的执行，还有一些任务，如动态内存分配，没有指针是无法执行的。所以，想要成为一名优秀的 C 程序员，学习指针是很有必要的。</p>&#13;
<p>正如您所知道的，每一个变量都有一个内存位置，每一个内存位置都定义了可使用 <span class="marked">&amp;</span> 运算符访问的地址，它表示了在内存中的一个地址。</p>&#13;
</div>&#13;
<p>请看下面的实例，它将输出定义的变量地址：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">var_runoob</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
    </span><span class="hl-types">int</span><span class="hl-code"> *</span><span class="hl-identifier">p</span><span class="hl-code">;              </span><span class="hl-comment">// 定义指针变量</span><span class="hl-comment"/><span class="hl-code">
    </span><span class="hl-identifier">p</span><span class="hl-code"> = &amp;</span><span class="hl-identifier">var_runoob</span><span class="hl-code">;
 
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">var_runoob 变量的地址： %p</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
   </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
var_runoob 变量的地址： 0x7ffeeaae08d8&#13;
</pre>&#13;
&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2014/09/c-pointer.png"/></p>&#13;
<p>通过上面的实例，我们了解了什么是内存地址以及如何访问它。接下来让我们看看什么是指针。</p>&#13;
&#13;
&#13;
<h2 class="tutheader">什么是指针？</h2><p>&#13;
指针也就是内存地址，指针变量是用来存放内存地址的变量。就像其他变量或常量一样，您必须在使用指针存储其他变量地址之前，对其进行声明。指针变量声明的一般形式为：</p>&#13;
<pre>&#13;
type *var_name;&#13;
</pre>&#13;
<p>在这里，<b>type</b> 是指针的基类型，它必须是一个有效的 C 数据类型，<b>var_name</b> 是指针变量的名称。用来声明指针的星号 <span class="marked">*</span> 与乘法中使用的星号是相同的。但是，在这个语句中，星号是用来指定一个变量是指针。以下是有效的指针声明：</p>&#13;
<div class="example">&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-types">int</span><span class="hl-code">    *</span><span class="hl-identifier">ip</span><span class="hl-code">;    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 一个整型的指针 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">double</span><span class="hl-code"> *</span><span class="hl-identifier">dp</span><span class="hl-code">;    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 一个 double 型的指针 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">float</span><span class="hl-code">  *</span><span class="hl-identifier">fp</span><span class="hl-code">;    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 一个浮点型的指针 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">char</span><span class="hl-code">   *</span><span class="hl-identifier">ch</span><span class="hl-code">;    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 一个字符型的指针 </span><span class="hl-mlcomment">*/</span></div>&#13;
</div>&#13;
</div>&#13;
<p>所有实际数据类型，不管是整型、浮点型、字符型，还是其他的数据类型，对应指针的值的类型都是一样的，都是一个代表内存地址的长的十六进制数。</p><p>不同数据类型的指针之间唯一的不同是，指针所指向的变量或常量的数据类型不同。</p>&#13;
&#13;
<h2 class="tutheader">如何使用指针？</h2>&#13;
<p>使用指针时会频繁进行以下几个操作：定义一个指针变量、把变量地址赋值给指针、访问指针变量中可用地址的值。这些是通过使用一元运算符 <span class="marked">*</span> 来返回位于操作数所指定地址的变量的值。下面的实例涉及到了这些操作：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code">  </span><span class="hl-identifier">var</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;   </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 实际变量的声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code">  *</span><span class="hl-identifier">ip</span><span class="hl-code">;        </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 指针变量的声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
 
   </span><span class="hl-identifier">ip</span><span class="hl-code"> = &amp;</span><span class="hl-identifier">var</span><span class="hl-code">;  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 在指针变量中存储 var 的地址 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
 
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">var 变量的地址: %p</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, &amp;</span><span class="hl-identifier">var</span><span class="hl-code">  </span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 在指针变量中存储的地址 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">ip 变量存储的地址: %p</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">ip</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 使用指针访问值 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">*ip 变量的值: %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, *</span><span class="hl-identifier">ip</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
var 变量的地址: 0x7ffeeef168d8&#13;
ip 变量存储的地址: 0x7ffeeef168d8&#13;
*ip 变量的值: 20&#13;
</pre>&#13;
&#13;
<h2 class="tutheader">C 中的 NULL 指针</h2>&#13;
<p>在变量声明的时候，如果没有确切的地址可以赋值，为指针变量赋一个 NULL 值是一个良好的编程习惯。赋为 NULL 值的指针被称为<b>空</b>指针。</p>&#13;
<p>NULL 指针是一个定义在标准库中的值为零的常量。请看下面的程序：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code">  *</span><span class="hl-identifier">ptr</span><span class="hl-code"> = </span><span class="hl-prepro">NULL</span><span class="hl-code">;
 
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">ptr 的地址是 %p</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">ptr</span><span class="hl-code">  </span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
ptr 的地址是 0x0&#13;
</pre>&#13;
<p>在大多数的操作系统上，程序不允许访问地址为 0 的内存，因为该内存是操作系统保留的。然而，内存地址 0 有特别重要的意义，它表明该指针不指向一个可访问的内存位置。但按照惯例，如果指针包含空值（零值），则假定它不指向任何东西。</p>&#13;
<p>如需检查一个空指针，您可以使用 if 语句，如下所示：</p>&#13;
<div class="example">&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-identifier">ptr</span><span class="hl-brackets">)</span><span class="hl-code">     </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 如果 p 非空，则完成 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">ptr</span><span class="hl-brackets">)</span><span class="hl-code">    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 如果 p 为空，则完成 </span><span class="hl-mlcomment">*/</span></div>&#13;
</div>&#13;
</div>&#13;
&#13;
<h2 class="tutheader">C 指针详解</h2>&#13;
<p>在 C 中，有很多指针相关的概念，这些概念都很简单，但是都很重要。下面列出了 C 程序员必须清楚的一些与指针相关的重要概念：</p>&#13;
<table class="reference notranslate">&#13;
<tr><th style="width:35%">概念</th><th>描述</th></tr>&#13;
<tr><td> <a href="/cprogramming/c-pointer-arithmetic.html" title="指针的算术运算">指针的算术运算</a></td><td>可以对指针进行四种算术运算：++、--、+、-</td> </tr>&#13;
<tr><td> <a href="/cprogramming/c-array-of-pointers.html" title="指针数组">指针数组</a></td><td>可以定义用来存储指针的数组。</td> </tr>&#13;
<tr><td> <a href="/cprogramming/c-pointer-to-pointer.html" title="指向指针的指针">指向指针的指针</a></td><td>C 允许指向指针的指针。</td> </tr>&#13;
<tr><td> <a href="/cprogramming/c-passing-pointers-to-functions.html" title="传递指针给函数">传递指针给函数</a></td><td>通过引用或地址传递参数，使传递的参数在调用函数中被改变。</td> </tr>&#13;
<tr><td> <a href="/cprogramming/c-return-pointer-from-functions.html" title="从函数返回指针">从函数返回指针</a></td><td>C 允许函数返回指针到局部变量、静态变量和动态内存分配。</td> </tr>&#13;
</table>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>